<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2024-01-15 Mon 16:34 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Programming in Lua</title>
<meta name="generator" content="Org Mode" />
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
         <meta name="viewport" content="width=device-width, initial-scale=1" />
         <link rel="stylesheet" title="Standard" href="https://wolfand11.github.io/res/worg_theme/css/worg.css" type="text/css" />
         <link rel="alternate stylesheet" title="Zenburn" href="https://wolfand11.github.io/res/worg_theme/css/worg-zenburn.css" type="text/css" />
         <link rel="alternate stylesheet" title="Classic" href="https://wolfand11.github.io/res/worg_theme/css/worg-classic.css" type="text/css" />
         <link rel="icon" href="https://wolfand11.github.io/res/favicon.ico" type="image/ico" />
         <script type="text/javascript" src="https://wolfand11.github.io/res/blog-tools.js"></script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href=""> UP </a>
 |
 <a accesskey="H" href="https://wolfand11.github.io"> HOME </a>
</div><div id="content" class="content">
<h1 class="title">Programming in Lua</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#orga6755f0">Programming in Lua</a></li>
<li><a href="#org553aa0b">Lua Reference Manual</a>
<ul>
<li><a href="#org2b4b3de">Basic Concpts</a>
<ul>
<li><a href="#org2aac421">Type and Values</a>
<ul>
<li><a href="#org9f37df7">bool</a></li>
</ul>
</li>
<li><a href="#org106ff27">Metatable and Metamethod</a>
<ul>
<li><a href="#orgf4b5626">metatable-metamethod 实现支持继承的 class</a>
<ul>
<li><a href="#orgd0f00fc">实现 class 关键要实现以下几点：</a></li>
<li><a href="#orge40da7e">Tips:</a></li>
<li><a href="#org8597592">具体实现</a></li>
<li><a href="#org814eb8b">Tips:</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#org165b13e">The Language</a></li>
<li><a href="#org9ca4101">The Application Program Interface</a></li>
<li><a href="#org15df494">The Auxiliary Library</a></li>
<li><a href="#orgb9b7113">The Standard Libraries</a>
<ul>
<li><a href="#org316ac97">String Manipulation</a>
<ul>
<li><a href="#org49d181a">format</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgc5b9706">Lua Standalone</a></li>
<li><a href="#orgbde4d6f">Incompatibilities with the Previous Version</a></li>
<li><a href="#org2b24b1d">The Complete Syntax of Lua</a></li>
</ul>
</li>
<li><a href="#org29bd85f">Usage</a>
<ul>
<li><a href="#org1d742cf">开发环境</a>
<ul>
<li><a href="#org5e1abbc">lua</a></li>
<li><a href="#orge17e1b2">luarocks 包管理</a>
<ul>
<li><a href="#org75c209b">ERROR</a></li>
</ul>
</li>
<li><a href="#org5e56df3">IDE</a>
<ul>
<li><a href="#org09797a7">VSCode</a></li>
<li><a href="#orgc35c05e">ZeroBrane</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org013077c">Basic</a>
<ul>
<li><a href="#orgd82ac9f">打印代码和对应的执行结果</a></li>
<li><a href="#orgbe6d34c">打印代码执行时间的方法</a></li>
</ul>
</li>
<li><a href="#orgabc6b4e">Lpeg</a>
<ul>
<li><a href="#org6634fac">lpeg</a>
<ul>
<li><a href="#orgaee970c">Introduction</a></li>
<li><a href="#org8dee1c5">Functions</a></li>
<li><a href="#org6c32cde">Basic Constructions</a>
<ul>
<li><a href="#orgea9b9ba">lpeg.P(value)</a></li>
<li><a href="#orgfb82911">lpeg.B(patt)</a></li>
<li><a href="#org0baf288">lpeg.R({range})</a></li>
<li><a href="#orgbc6c797">lpeg.S(string)</a></li>
<li><a href="#orgf91b916">lpeg.V(v)</a></li>
<li><a href="#org653977e">lpeg.locale([table])</a></li>
<li><a href="#org0741b7f">patt1+patt2</a></li>
<li><a href="#org707c81d">patt1-patt2</a></li>
<li><a href="#org934cfa4">-patt</a></li>
<li><a href="#orgd31e6c4">#patt</a></li>
<li><a href="#orgfd1dee8">patt1*patt2</a></li>
<li><a href="#orgab607ee">patt^n</a></li>
</ul>
</li>
<li><a href="#org2def5d5">Grammars</a></li>
<li><a href="#orgd69c1ff">Captures</a>
<ul>
<li><a href="#orga68c59d">lpeg.C (patt)</a></li>
<li><a href="#org27988c7">lpeg.Carg (n)</a></li>
<li><a href="#org43b1845">lpeg.Cb (name)</a></li>
<li><a href="#org227ce61">lpeg.Cc ([value, &#x2026;])</a></li>
<li><a href="#org8a65e43">lpeg.Cf (patt, func)</a></li>
<li><a href="#orgc1373e9">lpeg.Cg (patt [, name])</a></li>
<li><a href="#org8525500">lpeg.Cp ()</a></li>
<li><a href="#org8726b07">lpeg.Cs (patt)</a></li>
<li><a href="#org546c1d5">lpeg.Ct (patt)</a></li>
<li><a href="#org64a8c8c">patt / string</a></li>
<li><a href="#org03535c7">patt / number</a></li>
<li><a href="#org1ff8344">patt / table</a></li>
<li><a href="#orgd30baae">patt / function</a></li>
<li><a href="#orgc072bea">lpeg.Cmt(patt, function)</a></li>
</ul>
</li>
<li><a href="#orgf9e1d81">Some Examples</a>
<ul>
<li><a href="#org1fb33e3">使用 Pattern</a></li>
<li><a href="#orga248939">匹配换行</a></li>
<li><a href="#org27676d7">匹配末尾</a></li>
<li><a href="#org4e75cd1">匹配数字</a></li>
<li><a href="#org267e515">匹配浮点数</a></li>
</ul>
</li>
<li><a href="#org56b7582">参考资料</a></li>
</ul>
</li>
<li><a href="#org0cb9675">Simple mathematical expression parser and evaluator in Lua with LPEG</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org355d354">参考资料</a></li>
</ul>
</div>
</div>
<p>
lua note.<br />
</p>
<div class="HTML" id="org54c2596">
<p>
&lt;!&#x2013; more &#x2013;&gt;<br />
</p>

</div>
<div id="outline-container-orga6755f0" class="outline-2">
<h2 id="orga6755f0">Programming in Lua</h2>
</div>
<div id="outline-container-org553aa0b" class="outline-2">
<h2 id="org553aa0b">Lua Reference Manual</h2>
<div class="outline-text-2" id="text-org553aa0b">
</div>
<div id="outline-container-org2b4b3de" class="outline-3">
<h3 id="org2b4b3de">Basic Concpts</h3>
<div class="outline-text-3" id="text-org2b4b3de">
</div>
<div id="outline-container-org2aac421" class="outline-4">
<h4 id="org2aac421">Type and Values</h4>
<div class="outline-text-4" id="text-org2aac421">
</div>
<div id="outline-container-org9f37df7" class="outline-5">
<h5 id="org9f37df7">bool</h5>
<div class="outline-text-5" id="text-org9f37df7">
<p>
lua 在进行条件测试中，nil 和 false 为 false，任何其他值都为 true。<br />
</p>
<div class="org-src-container">
<pre class="src src-lua">function PrintBoolCheck(var)
    if var then
        print(tostring(var) .. " is true")
    else
        print(tostring(var) .. " is false")
    end
end

PrintBoolCheck(nil)
PrintBoolCheck(false)
PrintBoolCheck({})
--output
-- nil is false
-- false is false
-- table: 0xed7f00 is true
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org106ff27" class="outline-4">
<h4 id="org106ff27">Metatable and Metamethod</h4>
<div class="outline-text-4" id="text-org106ff27">
<p>
metatable 是 lua 中修改 table 默认行为的一种机制。通过给一个 table 指定 metatable，并给该 metatable 添加一些特定的方法，就可以改变 table 的行为。<br />
例如：<br />
给 metatable 添加__index 元方法，可以改变索引 table 不存在字段时的行为。<br />
给 metatable 添加__newindex 元方法，可以改变为 table 不存在字段赋值时的行为。<br />
</p>
</div>
<div id="outline-container-orgf4b5626" class="outline-5">
<h5 id="orgf4b5626">metatable-metamethod 实现支持继承的 class</h5>
<div class="outline-text-5" id="text-orgf4b5626">
</div>
<div id="outline-container-orgd0f00fc" class="outline-6">
<h6 id="orgd0f00fc">实现 class 关键要实现以下几点：</h6>
<div class="outline-text-6" id="text-orgd0f00fc">
<ul class="org-ul">
<li>类支持构造对象，构造出的对象共用类的方法<br />
可以 new 对象，new 对象时调用类的构造函数<br /></li>
<li>子类对象可以访问父类的方法<br /></li>
<li>构造对象时，先调用父类构造函数，后调用子类构造函数<br />
通常父类的构造函数调用不封装在 class 的实现中，而是放在定义类的时候，这样可以让上层控制，父类构造函数的调用顺序，以及是否调用。<br /></li>
<li>子类对象拥有父类对象的属性<br /></li>
</ul>
</div>
</div>
<div id="outline-container-orge40da7e" class="outline-6">
<h6 id="orge40da7e">Tips:</h6>
<div class="outline-text-6" id="text-orge40da7e">
<p>
在元方法__index 中取属性时，需要使用 rawget,否则会自己调用自己陷入死循环<br />
</p>
</div>
</div>
<div id="outline-container-org8597592" class="outline-6">
<h6 id="org8597592">具体实现</h6>
<div class="outline-text-6" id="text-org8597592">
<p>
在该实现中，我将父类的构造函数调用也封装到 class 实现中了。<br />
</p>
<div class="org-src-container">
<pre class="src src-lua">  function class(clsName, super)
      if clsName==nil then
          print("Error: className is nil")
      end
      if _G[clsName] then
          print("Error: class eixst. className = " .. clsName)
      end

      function invoke_ctor(class, obj, ...)
          if class~=nil then
              invoke_ctor(rawget(class,"super"), obj, ...)
              if type(rawget(class,"ctor"))=="function" then
                  class.ctor(obj, ...)
              end
          end
      end
      function get_func(class, key)
          if class~=nil then
              if type(rawget(class,key))=="function" then
                  return class[key]
              else
                  return get_func(rawget(class,"super"), key)
              end
          end
          print("Error: not exist member func -&gt; " .. key)
          return nil
      end

      local cls = {}
      cls.super = super
      cls.__index = function (tbl, key)
          return get_func(cls, key)
      end
      setmetatable(cls,cls)
      cls.new = function (...)
          local obj = {}
          setmetatable(obj, cls)
          invoke_ctor(cls, obj, ...)
          return obj
      end
      return cls
  end
</pre>
</div>
</div>
</div>
<div id="outline-container-org814eb8b" class="outline-6">
<h6 id="org814eb8b">Tips:</h6>
<div class="outline-text-6" id="text-org814eb8b">
<ul class="org-ul">
<li>pairs 不会列出元表中__index 的字段<br /></li>
<li>判断 tabel 是否含有某个字段<br /></li>
</ul>
<div class="org-src-container">
<pre class="src src-lua">  -- 错误的写法：
  -- 当 svrData.IsLeader == false 而 role.data.IsLeader == true 时，下面的代码不会更新 role.data.IsLeader 的值为 false
  if rawget(svrData,"IsLeader") then
      role.data.IsLeader = svrData.IsLeader
  end
  -- 正确的写法：
  if rawget(svrData,"IsLeader")~=nil then
      role.data.IsLeader = svrData.IsLeader
  end
  -- 最好的写法：
  -- 这样即使 svrData[k] == nil 也可以对 role.data[k]进行赋值
  for k,v in pairs(svrData) do
      role.data[k] = v
  end
</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-org165b13e" class="outline-3">
<h3 id="org165b13e">The Language</h3>
</div>
<div id="outline-container-org9ca4101" class="outline-3">
<h3 id="org9ca4101">The Application Program Interface</h3>
</div>
<div id="outline-container-org15df494" class="outline-3">
<h3 id="org15df494">The Auxiliary Library</h3>
</div>
<div id="outline-container-orgb9b7113" class="outline-3">
<h3 id="orgb9b7113">The Standard Libraries</h3>
<div class="outline-text-3" id="text-orgb9b7113">
</div>
<div id="outline-container-org316ac97" class="outline-4">
<h4 id="org316ac97">String Manipulation</h4>
<div class="outline-text-4" id="text-org316ac97">
</div>
<div id="outline-container-org49d181a" class="outline-5">
<h5 id="org49d181a">format</h5>
<div class="outline-text-5" id="text-org49d181a">
<div class="org-src-container">
<pre class="src src-lua">-- 前/后填充
string.format(%10s, str)  --不够 10 个字符前面填充相应空格
string.format(%-10s, str) --不够 10 个字符后面填充相应空格
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-orgc5b9706" class="outline-3">
<h3 id="orgc5b9706">Lua Standalone</h3>
</div>
<div id="outline-container-orgbde4d6f" class="outline-3">
<h3 id="orgbde4d6f">Incompatibilities with the Previous Version</h3>
</div>
<div id="outline-container-org2b24b1d" class="outline-3">
<h3 id="org2b24b1d">The Complete Syntax of Lua</h3>
</div>
</div>
<div id="outline-container-org29bd85f" class="outline-2">
<h2 id="org29bd85f">Usage</h2>
<div class="outline-text-2" id="text-org29bd85f">
</div>
<div id="outline-container-org1d742cf" class="outline-3">
<h3 id="org1d742cf">开发环境</h3>
<div class="outline-text-3" id="text-org1d742cf">
</div>
<div id="outline-container-org5e1abbc" class="outline-4">
<h4 id="org5e1abbc">lua</h4>
<div class="outline-text-4" id="text-org5e1abbc">
<div class="org-src-container">
<pre class="src src-shell"><span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">windows</span>
pacman -S mingw-w64-x86_64-lua
</pre>
</div>
</div>
</div>
<div id="outline-container-orge17e1b2" class="outline-4">
<h4 id="orge17e1b2">luarocks 包管理</h4>
<div class="outline-text-4" id="text-orge17e1b2">
<div class="org-src-container">
<pre class="src src-shell"><span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#23433;&#35013; luarocks</span>
pacman -S mingw-w64-x86_64-lua-luarocks

<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#22312;D:\Applications\msys64\mingw64\bin\ &#30446;&#24405;&#19979;&#21019;&#24314; luarocks.bat &#25991;&#20214;&#65292;&#23558;&#19979;&#38754;&#20869;&#23481;&#22635;&#20805;&#36827;&#21435;:</span>
@echo off
<span style="color: #4f97d7;">echo</span> input parameters are: %*
lua D:\Applications\msys64\mingw64\bin\luarocks %*
pause

<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#19979;&#38754;&#21629;&#20196;&#22312; PowerShell&#20013;&#25191;&#34892;</span>
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#26597;&#30475;luarocks &#29615;&#22659;, &#20250;&#26174;&#31034; Options Commands Variables Configuration &#36825;&#20960;&#20010;&#26041;&#38754;&#30340;&#20449;&#24687;</span>
luarocks.bat

<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#37197;&#32622; lua dir (&#40664;&#35748;&#37197;&#32622;&#24212;&#35813;&#26159;&#27491;&#30830;&#30340;&#65292;&#36825;&#19968;&#27493;&#21487;&#20197;&#30465;&#30053;)</span>
luarocks.bat config lua_dir D:\Applications\msys64\mingw64\bin

<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#37197;&#32622; lua include dir</span>
luarocks.bat config variables.LUA_INCDIR D:\Applications\msys64\mingw64\include

<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#37197;&#32622; lua lib dir</span>
luarocks.bat config variables.LUA_LIBDIR D:\Applications\msys64\mingw64\lib

<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">luarocks &#21019;&#24314;&#24037;&#31243;</span>
cd-test
luarocks.bat init lua_test_proj

<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">install lpeg (TODO &#24403;&#21069;&#36824;&#27809;&#26377;&#25104;&#21151;, &#25152;&#20197;&#36824;&#26159;&#30452;&#25509;&#20351;&#29992; ZeroBrane &#31639;&#20102;)</span>
luarocks.bat install lpeg
</pre>
</div>

<ul class="org-ul">
<li><a href="https://luarocks.org/">https://luarocks.org/</a><br /></li>
</ul>
</div>
<div id="outline-container-org75c209b" class="outline-5">
<h5 id="org75c209b">ERROR</h5>
</div>
</div>

<div id="outline-container-org5e56df3" class="outline-4">
<h4 id="org5e56df3">IDE</h4>
<div class="outline-text-4" id="text-org5e56df3">
</div>
<div id="outline-container-org09797a7" class="outline-5">
<h5 id="org09797a7">VSCode</h5>
<div class="outline-text-5" id="text-org09797a7">
<p>
安装如下插件<br />
</p>
<ul class="org-ul">
<li>Code Runner <a href="https://github.com/formulahendry/vscode-code-runner">https://github.com/formulahendry/vscode-code-runner</a><br /></li>
<li>LuaHelper <a href="https://github.com/Tencent/LuaHelper">https://github.com/Tencent/LuaHelper</a><br /></li>
</ul>
</div>
</div>
<div id="outline-container-orgc35c05e" class="outline-5">
<h5 id="orgc35c05e">ZeroBrane</h5>
<div class="outline-text-5" id="text-orgc35c05e">
<p>
ZeroBrane 自带 lua 环境，不需要额外配置。<br />
</p>

<ul class="org-ul">
<li>ZeroBrane <a href="https://studio.zerobrane.com/">https://studio.zerobrane.com/</a><br /></li>
</ul>
</div>
</div>
</div>
</div>
<div id="outline-container-org013077c" class="outline-3">
<h3 id="org013077c">Basic</h3>
<div class="outline-text-3" id="text-org013077c">
</div>
<div id="outline-container-orgd82ac9f" class="outline-4">
<h4 id="orgd82ac9f">打印代码和对应的执行结果</h4>
<div class="outline-text-4" id="text-orgd82ac9f">
<div class="org-src-container">
<pre class="src src-lua">function locals(env_pos)
	env_pos = env_pos or 3
    local variables = {}
    local idx = 1
    while true do
        local ln, lv = debug.getlocal(env_pos, idx)
        if ln ~= nil then
            variables[ln] = lv
        else
            break
        end
        idx = 1 + idx
    end
    return variables
end

function eval(equation, variables, env_pos)
    if(type(equation) == "string") then
        local eval = loadstring("return "..equation);
        if(type(eval) == "function") then
			variables = variables or locals(env_pos)
            setfenv(eval, variables)
            return eval();
        end
    end
end

function log_exp(exp, str_fmt_count, env_pos)
    str_fmt_count = str_fmt_count or 20
    env_pos = env_pos or 4
    local result = eval(exp, nil, env_pos)
    local fmt_str = '%-' .. tostring(str_fmt_count) .. 's'
	  print(string.format(fmt_str, exp), " -- ", result)
end

log_exp("hi")

local lpeg = require "lpeg"
local C, P, R, S, V = lpeg.C, lpeg.P, lpeg.R, lpeg.S, lpeg.V
log_exp("lpeg.match(P'a', 'abc')")
</pre>
</div>
</div>
</div>
<div id="outline-container-orgbe6d34c" class="outline-4">
<h4 id="orgbe6d34c">打印代码执行时间的方法</h4>
<div class="outline-text-4" id="text-orgbe6d34c">
<p>
下面打印出的时间单位为秒<br />
</p>
<div class="org-src-container">
<pre class="src src-lua">  local codeTimer = os.clock()
  -- ... 此处省略若干上帝代码
  print("delta time = " .. tostring(os.clock()-codeTimer))
  -- delta time = 4.928
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgabc6b4e" class="outline-3">
<h3 id="orgabc6b4e">Lpeg</h3>
<div class="outline-text-3" id="text-orgabc6b4e">
</div>
<div id="outline-container-org6634fac" class="outline-4">
<h4 id="org6634fac">lpeg</h4>
<div class="outline-text-4" id="text-org6634fac">
</div>
<div id="outline-container-orgaee970c" class="outline-5">
<h5 id="orgaee970c">Introduction</h5>
<div class="outline-text-5" id="text-orgaee970c">
<p>
下表列出了创建 patterns 的基础操作：<br />
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">Operator</td>
<td class="org-left">Description</td>
<td class="org-left">描述</td>
</tr>

<tr>
<td class="org-left">lpeg.P(string)</td>
<td class="org-left">Matches string literally</td>
<td class="org-left">匹配字符串</td>
</tr>

<tr>
<td class="org-left">lpeg.P(n)</td>
<td class="org-left">Matches exactly n characters</td>
<td class="org-left">准确匹配 n 个字符</td>
</tr>

<tr>
<td class="org-left">lpeg.S(string)</td>
<td class="org-left">Matches any character in string (Set)</td>
<td class="org-left">匹配字符串中的任何字符</td>
</tr>

<tr>
<td class="org-left">lpeg.R("xy")</td>
<td class="org-left">Matches any character between x and y (Range)</td>
<td class="org-left">匹配 x 和 y 之间的任何字符（范围）</td>
</tr>

<tr>
<td class="org-left">patt^n</td>
<td class="org-left">Matches at least n repetitions of patt</td>
<td class="org-left">匹配至少 n 个重复的 patt</td>
</tr>

<tr>
<td class="org-left">patt^-n</td>
<td class="org-left">Matches at most n repetitions of patt</td>
<td class="org-left">匹配至多 n 个重复的 patt</td>
</tr>

<tr>
<td class="org-left">patt1 * patt2</td>
<td class="org-left">Matches patt1 followed by patt2</td>
<td class="org-left">匹配 patt1 紧跟着 patt2</td>
</tr>

<tr>
<td class="org-left">patt1 + patt2</td>
<td class="org-left">Matches patt1 or patt2 (ordered choice)</td>
<td class="org-left">匹配 patt1 或 patt2</td>
</tr>

<tr>
<td class="org-left">patt1 - patt2</td>
<td class="org-left">Matches patt1 if patt2 does not match</td>
<td class="org-left">不匹配 patt2，匹配 patt1</td>
</tr>

<tr>
<td class="org-left">-patt</td>
<td class="org-left">Equivalent to ("" - patt)</td>
<td class="org-left">等价于 "" - patt, 即：匹配 patt 失败则匹配""</td>
</tr>

<tr>
<td class="org-left">#patt</td>
<td class="org-left">Matches patt but consumes no input</td>
<td class="org-left">匹配 patt，但不消耗任何输入</td>
</tr>

<tr>
<td class="org-left">lpeg.B(patt)</td>
<td class="org-left">Matches patt behind the current position, consuming no input</td>
<td class="org-left">匹配当前位置后的 patt，不消耗任何输入</td>
</tr>
</tbody>
</table>

<div class="org-src-container">
<pre class="src src-lua">-- 下面例子中，都需要包含这里的 包引入 和 名称定义
local lpeg = require "lpeg"

local C, P, R, S, V = lpeg.C, lpeg.P, lpeg.R, lpeg.S, lpeg.V
</pre>
</div>
</div>
</div>
<div id="outline-container-org8dee1c5" class="outline-5">
<h5 id="org8dee1c5">Functions</h5>
<div class="outline-text-5" id="text-org8dee1c5">
<p>
lpeg.match(pattern, subject, [,init])<br />
</p>

<p>
匹配函数。它试图将给定的模式与目标字符串进行匹配。如果匹配成功，返回匹配后第一个字符在目标字符串中的索引，或者捕获的值（如果模式捕获了任何值）。<br />
init 为可选的整数型参数，用于设定进行匹配的开始位置。像 Lua 库中的惯例一样，负值表示从末尾开始计算。<br />
</p>

<p>
与典型的模式匹配函数不同，match 只在 anchored 模式下工作；也就是说，它试图将模式与给定目标字符串的前缀（从 init 位置开始）相匹配，而不是与目标字符串的任意子串相匹配。因此，如果我们想在一个字符串的任何地方找到一个模式，我们必须在 Lua 中写一个循环，或者写一个可以在任何地方匹配的模式。第二种方法更简单，高效。<br />
</p>

<p>
lpeg.type(value)<br />
如果给定的 value 是一个 pattern，则返回字符串 "pattern"，否则返回 nil<br />
</p>

<p>
lpeg.version()<br />
返回 LPeg 的版本号字符串<br />
</p>

<p>
lpeg.setmaxstack(max)<br />
设置 backtrack stack 的尺寸，LPeg 会使用 backtrack stack 更正调用和选择。默认值为 400<br />
</p>
</div>
</div>
<div id="outline-container-org6c32cde" class="outline-5">
<h5 id="org6c32cde">Basic Constructions</h5>
<div class="outline-text-5" id="text-org6c32cde">
</div>
<div id="outline-container-orgea9b9ba" class="outline-6">
<h6 id="orgea9b9ba">lpeg.P(value)</h6>
<div class="outline-text-6" id="text-orgea9b9ba">
<p>
用下面的规则将一个给定的值转换成一个合适的 pattern：<br />
如果参数是一个 pattern，则返回参数 pattern。<br />
如果参数是一个 string，则返回匹配这个字符串的 pattern。<br />
如果参数是一个非负整数 n, 则返回一个匹配正好是 n 个字符的字符串的 pattern。<br />
如果参数是一个负整数 -n, 则只有在输入的字符串还剩下不到 n 个字符才会成。 lpeg.P(-n) 等同于 -lpeg.P(n) (see the unary minus operation).<br />
如果参数是一个 boolean, value 为 true 返回总是匹配成功的 pattern，value 为 false 返回总是匹配失败的 pattern，不消耗任何输入。<br />
如果参数是一个 table, 则被解读为一个 grammar (see <a href="#org2def5d5">Grammars</a>)。<br />
如果参数是一个 function, 则返回一个 pattern，等价于一个 match-time capture 用一个空字符串匹配.<br />
</p>

<div class="org-src-container">
<pre class="src src-lua">local lpeg = require "lpeg"

local C, P, R, S, V = lpeg.C, lpeg.P, lpeg.R, lpeg.S, lpeg.V

-- P匹配字符串 从头开始找,返回第一次找到的位置+1
print(lpeg.match(P'a', 'abc'))    -- 2
print(lpeg.match(P'b', 'abc'))    -- nil
print(lpeg.match(P'ab', 'abc'))   -- 3
print(lpeg.match(P'a', 'aaa'))    -- 2
print(lpeg.match(P'ab', 'abab'))  -- 3
</pre>
</div>
</div>
</div>
<div id="outline-container-orgfb82911" class="outline-6">
<h6 id="orgfb82911">lpeg.B(patt)</h6>
</div>
<div id="outline-container-org0baf288" class="outline-6">
<h6 id="org0baf288">lpeg.R({range})</h6>
<div class="outline-text-6" id="text-org0baf288">
<div class="org-src-container">
<pre class="src src-lua">local lpeg = require "lpeg"

local C, P, R, S, V = lpeg.C, lpeg.P, lpeg.R, lpeg.S, lpeg.V

-- R匹配范围,09代表0~9,AZ同理,也是从头开始找
print(lpeg.match(R'az', 'abc'))  -- 2
print(lpeg.match(R'aZ', 'abc'))  -- nil
print(lpeg.match(R'AZ', 'abc'))  -- nil
print(lpeg.match(R'Az', 'abc'))  -- 2
print(lpeg.match(R'az', '0abc')) -- nil
</pre>
</div>
</div>
</div>
<div id="outline-container-orgbc6c797" class="outline-6">
<h6 id="orgbc6c797">lpeg.S(string)</h6>
<div class="outline-text-6" id="text-orgbc6c797">
<div class="org-src-container">
<pre class="src src-lua">local lpeg = require "lpeg"

local C, P, R, S, V = lpeg.C, lpeg.P, lpeg.R, lpeg.S, lpeg.V

-- S集合匹配 从头开始 若字符串包含集合内元素,匹配成功(ps:那岂不是匹配成功就一定是2,后面再看)
print(lpeg.match(S'abc', 'abc')) -- 2
print(lpeg.match(S'bc',  'abc')) -- nil
print(lpeg.match(S'1a',  'abc')) -- 2
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf91b916" class="outline-6">
<h6 id="orgf91b916">lpeg.V(v)</h6>
<div class="outline-text-6" id="text-orgf91b916">
<p>
该操作为 grammar 创建一个非终结变量。非终结变量指的是在闭包语法中由 v 所索引的规则。<br />
This operation creates a non-terminal (a variable) for a grammar. The created non-terminal refers to the rule indexed by v in the enclosing grammar.<br />
</p>
</div>
</div>
<div id="outline-container-org653977e" class="outline-6">
<h6 id="org653977e">lpeg.locale([table])</h6>
<div class="outline-text-6" id="text-org653977e">
<p>
返回一个表格，其中包含匹配各类字符的模式，这些模式会考虑当前语言环境。该 table 有如下字段 alnum, alpha, cntrl, digit, graph, lower, print, punct, space, upper, 和 xdigit ，每个字段都包含一个相应的模式。每个模式都匹配属于其类别的任何单个字符。<br />
</p>

<p>
如果调用时有一个参数 table，那么它就在给定的 table 内创建这些字段，并返回该 table。<br />
</p>
</div>
</div>
<div id="outline-container-org0741b7f" class="outline-6">
<h6 id="org0741b7f">patt1+patt2</h6>
<div class="outline-text-6" id="text-org0741b7f">
<div class="org-src-container">
<pre class="src src-lua">local lpeg = require "lpeg"

local C, P, R, S, V = lpeg.C, lpeg.P, lpeg.R, lpeg.S, lpeg.V

-- +代表or(或)
-- P'a' + P'b'^1 代表开头是a 或 开头至少1个b
local a_1b = P'a' + P'b'^1
print(match(a_1b, 'ab')) --2
print(match(a_1b, 'bb')) --3
print(match(a_1b, 'bc')) --2
</pre>
</div>
</div>
</div>
<div id="outline-container-org707c81d" class="outline-6">
<h6 id="org707c81d">patt1-patt2</h6>
<div class="outline-text-6" id="text-org707c81d">
<div class="org-src-container">
<pre class="src src-lua">-- 不匹配patt2，匹配patt1
lpeg.match(S'abcd'-S'ab',  'cd') -- 	2
lpeg.match(S'abcd'-S'ab',  'ab') -- 	nil
</pre>
</div>
</div>
</div>
<div id="outline-container-org934cfa4" class="outline-6">
<h6 id="org934cfa4">-patt</h6>
<div class="outline-text-6" id="text-org934cfa4">
<div class="org-src-container">
<pre class="src src-lua">-- 等价于 "" - patt
lpeg.match(-S'ab',  'ab') -- 	nil
lpeg.match(-S'ab',  'cd') -- 	1
</pre>
</div>
</div>
</div>
<div id="outline-container-orgd31e6c4" class="outline-6">
<h6 id="orgd31e6c4">#patt</h6>
<div class="outline-text-6" id="text-orgd31e6c4">
<div class="org-src-container">
<pre class="src src-lua">-- 匹配patt，匹配成功不消耗输入
lpeg.match(#P'ab',  'ab') -- 	1
lpeg.match(#P'ab',  'cd') -- 	nil
</pre>
</div>
</div>
</div>
<div id="outline-container-orgfd1dee8" class="outline-6">
<h6 id="orgfd1dee8">patt1*patt2</h6>
<div class="outline-text-6" id="text-orgfd1dee8">
<div class="org-src-container">
<pre class="src src-lua">local lpeg = require "lpeg"

local C, P, R, S, V = lpeg.C, lpeg.P, lpeg.R, lpeg.S, lpeg.V

-- *代表 连接
-- P'a'*P'b'^0代表开头是a且后面跟至少0个b
print(match(P'a'*P'b'^0, 'aab')) --2
print(match(P'a'*P'b'^1, 'aab')) --nil
print(match(P'a'*P'b'^1, 'abab'))--3
print(match(P'a'^0*P'b', 'aab')) --4
print(match(P'a'^1*P'b', 'aab')) --4
</pre>
</div>
</div>
</div>
<div id="outline-container-orgab607ee" class="outline-6">
<h6 id="orgab607ee">patt^n</h6>
<div class="outline-text-6" id="text-orgab607ee">
<div class="org-src-container">
<pre class="src src-lua">local lpeg = require "lpeg"

local C, P, R, S, V = lpeg.C, lpeg.P, lpeg.R, lpeg.S, lpeg.V

-- ^n代表至少匹配n次 ^-n代表至多匹配n次
print(lpeg.match(P'a'^1,   'aaaa'))	--5
print(lpeg.match(P'a'^4,   'aaaa'))	--5
print(lpeg.match(P'a'^5,   'aaaa'))	--nil
print(lpeg.match(P'aa'^2,  'aaaa'))	--5
print(lpeg.match(P'ab'^2,  'ababc'))	--5
print(lpeg.match(P'ab'^-1, 'ababc'))   --3
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org2def5d5" class="outline-5">
<h5 id="org2def5d5">Grammars</h5>
<div class="outline-text-5" id="text-org2def5d5">
<p>
通过使用 Lua 变量，可以逐步定义模式，每个新模式都使用以前定义的模式。然而，这种技术并不允许定义递归模式。对于递归模式，我们需要真正的语法。<br />
</p>

<p>
LPeg 用表格表示语法，每个条目都是一个规则。<br />
</p>

<p>
调用 lpeg.V(v)可以创建一个模式，用来表示语法中索引为 v 的非终结符（或变量）。当这个函数被求解时，语法还不存在，所以返回的是一个对该规则的开放引用(open reference)。<br />
</p>

<p>
当一个表被转换为一个模式时（通过调用 lpeg.P 或者需要模式的地方使用该表），它就被固定了。然后由 lpeg.V(v)创建的每一个开放引用都被纠正为指向规则，该规则在表中由 v 索引。<br />
</p>

<p>
当一个表被固定时，其结果是一个符合其初始规则的模式。表中索引为 1 的条目定义了其初始规则。如果该条目是一个字符串，则假定它是初始规则的名称。否则，LPeg 假定条目 1 本身就是初始规则。<br />
</p>

<p>
例如，下面的语法匹配具有相同数量的 a 和 b 的字符串：<br />
</p>
<div class="org-src-container">
<pre class="src src-lua">equalcount = lpeg.P{
  "S";   -- initial rule name
  S = "a" * lpeg.V"B" + "b" * lpeg.V"A" + "",
  A = "a" * lpeg.V"S" + "b" * lpeg.V"A" * lpeg.V"A",
  B = "b" * lpeg.V"S" + "a" * lpeg.V"B" * lpeg.V"B",
} * -1
</pre>
</div>
</div>
</div>
<div id="outline-container-orgd69c1ff" class="outline-5">
<h5 id="orgd69c1ff">Captures</h5>
<div class="outline-text-5" id="text-orgd69c1ff">
<p>
Cature 是一个 pattern，capture 可以依据其匹配的内容生成值()。<br />
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">Operation</td>
<td class="org-left">What it Produces</td>
</tr>

<tr>
<td class="org-left">lpeg.C(patt)</td>
<td class="org-left">the match for patt plus all captures made by patt</td>
</tr>

<tr>
<td class="org-left">lpeg.Carg(n)</td>
<td class="org-left">the value of the nth extra argument to lpeg.match (matches the empty string)</td>
</tr>

<tr>
<td class="org-left">lpeg.Cb(name)</td>
<td class="org-left">the values produced by the previous group capture named name (matches the empty string)</td>
</tr>

<tr>
<td class="org-left">lpeg.Cc(values)</td>
<td class="org-left">the given values (matches the empty string)</td>
</tr>

<tr>
<td class="org-left">lpeg.Cf(patt, func)</td>
<td class="org-left">a folding of the captures from patt</td>
</tr>

<tr>
<td class="org-left">lpeg.Cg(patt [, name])</td>
<td class="org-left">the values produced by patt, optionally tagged with name</td>
</tr>

<tr>
<td class="org-left">lpeg.Cp()</td>
<td class="org-left">the current position (matches the empty string)</td>
</tr>

<tr>
<td class="org-left">lpeg.Cs(patt)</td>
<td class="org-left">the match for patt with the values from nested captures replacing their matches</td>
</tr>

<tr>
<td class="org-left">lpeg.Ct(patt)</td>
<td class="org-left">a table with all captures from patt</td>
</tr>

<tr>
<td class="org-left">patt / string</td>
<td class="org-left">string, with some marks replaced by captures of patt</td>
</tr>

<tr>
<td class="org-left">patt / number</td>
<td class="org-left">the n-th value captured by patt, or no value when number is zero.</td>
</tr>

<tr>
<td class="org-left">patt / table</td>
<td class="org-left">table[c], where c is the (first) capture of patt</td>
</tr>

<tr>
<td class="org-left">patt / function</td>
<td class="org-left">the returns of function applied to the captures of patt</td>
</tr>

<tr>
<td class="org-left">lpeg.Cmt(patt, function)</td>
<td class="org-left">the returns of function applied to the captures of patt; the application is done at match time</td>
</tr>
</tbody>
</table>
</div>
<div id="outline-container-orga68c59d" class="outline-6">
<h6 id="orga68c59d">lpeg.C (patt)</h6>
</div>
<div id="outline-container-org27988c7" class="outline-6">
<h6 id="org27988c7">lpeg.Carg (n)</h6>
</div>
<div id="outline-container-org43b1845" class="outline-6">
<h6 id="org43b1845">lpeg.Cb (name)</h6>
</div>
<div id="outline-container-org227ce61" class="outline-6">
<h6 id="org227ce61">lpeg.Cc ([value, &#x2026;])</h6>
</div>
<div id="outline-container-org8a65e43" class="outline-6">
<h6 id="org8a65e43">lpeg.Cf (patt, func)</h6>
</div>
<div id="outline-container-orgc1373e9" class="outline-6">
<h6 id="orgc1373e9">lpeg.Cg (patt [, name])</h6>
</div>
<div id="outline-container-org8525500" class="outline-6">
<h6 id="org8525500">lpeg.Cp ()</h6>
</div>
<div id="outline-container-org8726b07" class="outline-6">
<h6 id="org8726b07">lpeg.Cs (patt)</h6>
</div>
<div id="outline-container-org546c1d5" class="outline-6">
<h6 id="org546c1d5">lpeg.Ct (patt)</h6>
</div>
<div id="outline-container-org64a8c8c" class="outline-6">
<h6 id="org64a8c8c">patt / string</h6>
</div>
<div id="outline-container-org03535c7" class="outline-6">
<h6 id="org03535c7">patt / number</h6>
</div>
<div id="outline-container-org1ff8344" class="outline-6">
<h6 id="org1ff8344">patt / table</h6>
</div>
<div id="outline-container-orgd30baae" class="outline-6">
<h6 id="orgd30baae">patt / function</h6>
</div>
<div id="outline-container-orgc072bea" class="outline-6">
<h6 id="orgc072bea">lpeg.Cmt(patt, function)</h6>
</div>
</div>
<div id="outline-container-orgf9e1d81" class="outline-5">
<h5 id="orgf9e1d81">Some Examples</h5>
<div class="outline-text-5" id="text-orgf9e1d81">
</div>
<div id="outline-container-org1fb33e3" class="outline-6">
<h6 id="org1fb33e3">使用 Pattern</h6>
<div class="outline-text-6" id="text-org1fb33e3">
<div class="org-src-container">
<pre class="src src-lua">local lpeg = require "lpeg"

lpeg.match(R'az'^1 * -1,  'hello ')    --	nil
lpeg.match(R'az'^1 * -1,  'hello')     --	6
lpeg.match(R'az'^1 * -P(1),  'hello')  --	6
</pre>
</div>
</div>
</div>
<div id="outline-container-orga248939" class="outline-6">
<h6 id="orga248939">匹配换行</h6>
<div class="outline-text-6" id="text-orga248939">
<div class="org-src-container">
<pre class="src src-lua">--开头是\r\n 或 \r 或 \n
P'\r\n' + S'\r\n'
</pre>
</div>
</div>
</div>
<div id="outline-container-org27676d7" class="outline-6">
<h6 id="org27676d7">匹配末尾</h6>
<div class="outline-text-6" id="text-org27676d7">
<div class="org-src-container">
<pre class="src src-lua">lpeg.match(S'helloworld'^1 * -1,  'hello'))  	     -- 6
lpeg.match(S'helloworld'^1 * -1,  'helloX')) 	     -- nil
lpeg.match(S'helloworld'^1 * -P(1),  'Xhello'))    --	nil
lpeg.match(S'helloworld'^1 * -P(1),  'Xhello', 2)) --	7
</pre>
</div>
</div>
</div>
<div id="outline-container-org4e75cd1" class="outline-6">
<h6 id="org4e75cd1">匹配数字</h6>
<div class="outline-text-6" id="text-org4e75cd1">
<div class="org-src-container">
<pre class="src src-lua">digit = R'09' -- 一个数字
digits = digit^1 -- 任意整数
</pre>
</div>
</div>
</div>
<div id="outline-container-org267e515" class="outline-6">
<h6 id="org267e515">匹配浮点数</h6>
<div class="outline-text-6" id="text-org267e515">
<div class="org-src-container">
<pre class="src src-lua">-- maybe(p)  可能有p
function maybe(p) return p^-1 end

digits = R'09'^1
sign = maybe(S'+-')
dot = '.'
exp = S'eE'
-- 浮点数 = 正负号 + 整数 + 小数 + 科学计数法
float = sign * digits * maybe(dot*digits) * maybe(exp*mpm*digits)

print(match(C(float),'3.1415926'))	--3.1415926
print(match(C(float),'3.14.15'))	--3.14
print(match(C(float),'3.14e-3'))	--3.14e-3
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org56b7582" class="outline-5">
<h5 id="org56b7582">参考资料</h5>
<div class="outline-text-5" id="text-org56b7582">
<ul class="org-ul">
<li><a href="http://www.inf.puc-rio.br/~roberto/lpeg/lpeg.html">http://www.inf.puc-rio.br/~roberto/lpeg/lpeg.html</a><br /></li>
<li><a href="https://leafo.net/guides/parsing-expression-grammars.html">https://leafo.net/guides/parsing-expression-grammars.html</a><br /></li>
<li><a href="http://lua-users.org/wiki/LpegRecipes">http://lua-users.org/wiki/LpegRecipes</a><br /></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org0cb9675" class="outline-4">
<h4 id="org0cb9675">Simple mathematical expression parser and evaluator in Lua with LPEG</h4>
<div class="outline-text-4" id="text-org0cb9675">
<div class="org-src-container">
<pre class="src src-lua">local lpeg = require"lpeg"
local C, P, R, S, V = lpeg.C, lpeg.P, lpeg.R, lpeg.S, lpeg.V

local white = S(" \t") ^ 0

local integer = white * C(R("09") ^ 1) * white / tonumber
local power   = white * C(P("^")) * white
local muldiv  = white * C(S("/*%")) * white
local addsub  = white * C(S("+-")) * white
local open    = white * P("(") * white
local close   = white * P(")") * white

local bfunc = {
    ["+"] = function(a,b) return a + b end,
    ["-"] = function(a,b) return a - b end,
    ["*"] = function(a,b) return a * b end,
    ["/"] = function(a,b) return math.floor(a / b) end,
    ["%"] = function(a,b) return a % b end,
    ["^"] = function(a,b) return a ^ b end
}

-- Insert binary node into AST
local function binary(rule)
    local function recurse(left,op,right,...)
        if op then
            return recurse(bfunc[op](left,right),...)
        else
            return left
        end
    end
    return rule / recurse
end

-- Insert unary node into AST
local function unary(rule)
    return rule / function(op,right)
        return bfunc[op](0,right)
    end
end

local grammar = P({
        "input",
        input      = V("expression") * -1,
        expression = binary( V("term") * ( addsub * V("term") )^0 ),
        term       = binary( V("factor") * ( muldiv * V("factor"))^0 ),
        factor     = binary( V("primary") * ( power * V("factor"))^0 ),
        primary    = integer
            + open * V("expression") * close
            + unary( addsub * V("primary") )
})

print(grammar:match("6%4"), 6%4)
print(grammar:match("3*(5-7^8)"), 3*(5-7^8))
print(grammar:match("5 + 2*3 - 1 + 7 * 8"), 5 + 2*3 - 1 + 7 * 8)
print(grammar:match("67 + 2 * 3 - 67 + 2/1 - 7"), 67 + 2 * 3 - 67 + 2/1 - 7)
print(grammar:match("(5*7/5) + (23) - 5 * (98-4)/(6*7-42)"), (5*7/5) + (23) - 5 * (98-4)/(6*7-42))
print(grammar:match("(2) + (17*2-30) * (5)+2 - (8/2)*4"), (2) + (17*2-30) * (5)+2 - (8/2)*4)
print(grammar:match("2*3*4/8 -   5/2*4 +  6 + 0/3"), math.floor(2*3*4/8) - math.floor(5/2)*4 +  6 + 0/3)
print(grammar:match("2*3 - 4*5 + 6/3"), 2*3 - 4*5 + 6/3)
</pre>
</div>

<ul class="org-ul">
<li><a href="https://gist.github.com/hmenke/0a4a1174eaf7250aea39093d4785fcfb">https://gist.github.com/hmenke/0a4a1174eaf7250aea39093d4785fcfb</a><br /></li>
</ul>
</div>
</div>
</div>
</div>
<div id="outline-container-org355d354" class="outline-2">
<h2 id="org355d354">参考资料</h2>
<div class="outline-text-2" id="text-org355d354">
<ul class="org-ul">
<li>lua manual <a href="https://www.lua.org/manual/5.4/">https://www.lua.org/manual/5.4/</a><br /></li>
<li>lua online <a href="https://www.lua.org/cgi-bin/demo">https://www.lua.org/cgi-bin/demo</a><br /></li>
<li>LPEG and regular expressions - comparison and tutorial <a href="http://www.gammon.com.au/lpeg">http://www.gammon.com.au/lpeg</a><br /></li>
</ul>
</div>
</div>
</div>
<div id="postamble" class="status">
<div id="vssue"></div>
        <link rel="stylesheet" href="https://unpkg.com/vssue/dist/vssue.min.css">
        <script src="https://unpkg.com/vue@2.7.10/dist/vue.runtime.min.js"></script>
        <script src="https://unpkg.com/vssue/dist/vssue.github.min.js"></script>
        <script>
          new Vue({
            el: '#vssue',
            render: h => h('Vssue', {
              props: {
                // 在这里设置当前页面对应的 Issue 标题
                title: 'Programming in Lua',

                // 在这里设置你使用的平台的 OAuth App 配置
                options: {
                    owner: 'wolfand11',
                    repo: 'blog_comments',
                    clientId: 'a02b49185d85859cb92c',
                    clientSecret: '6f123085c6f1ce339e2517d24e5b099fa1dc9c85', // 只有在使用某些平台时需要
                },
              }
            })
          })
        </script>
</div>
</body>
</html>
