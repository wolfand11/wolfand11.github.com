<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2024-09-23 Mon 13:42 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>xmake</title>
<meta name="generator" content="Org Mode" />
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
         <meta name="viewport" content="width=device-width, initial-scale=1" />
         <link rel="stylesheet" title="Standard" href="https://wolfand11.github.io/res/worg_theme/css/worg.css" type="text/css" />
         <link rel="alternate stylesheet" title="Zenburn" href="https://wolfand11.github.io/res/worg_theme/css/worg-zenburn.css" type="text/css" />
         <link rel="alternate stylesheet" title="Classic" href="https://wolfand11.github.io/res/worg_theme/css/worg-classic.css" type="text/css" />
         <link rel="icon" href="https://wolfand11.github.io/res/favicon.ico" type="image/ico" />
         <script type="text/javascript" src="https://wolfand11.github.io/res/blog-tools.js"></script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href=""> UP </a>
 |
 <a accesskey="H" href="https://wolfand11.github.io"> HOME </a>
</div><div id="content" class="content">
<h1 class="title">xmake</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org91058e8">xmake</a>
<ul>
<li><a href="#org98bae15">Install</a>
<ul>
<li><a href="#org280190d">安装 Windows 版本</a></li>
<li><a href="#orgb7942ae">vscode c/c++ 开发环境搭建</a></li>
</ul>
</li>
<li><a href="#orgb57851e">Base Usage</a>
<ul>
<li><a href="#org31c3a3a">创建工程</a>
<ul>
<li><a href="#org778e958">方法 1：手动创建</a></li>
<li><a href="#org3e2b6c3">方法 2：命令行</a></li>
</ul>
</li>
<li><a href="#orgfcaf008">工程配置</a></li>
<li><a href="#orgc7fda40">C++包管理</a>
<ul>
<li><a href="#org2077c1c">查找 package</a></li>
<li><a href="#org98e3526">查询 package 信息</a></li>
<li><a href="#orgee8735c">版本设置</a></li>
<li><a href="#org1329030">删除包</a></li>
</ul>
</li>
<li><a href="#orgae5bd3d">编译运行</a>
<ul>
<li><a href="#org13d4825">方法 1：VSCode 中直接操作</a></li>
<li><a href="#orga337b8d">方法 2：生成 VS 工程来操作</a></li>
<li><a href="#orgce81552">方法 3：命令行中操作</a></li>
</ul>
</li>
<li><a href="#orgc3d994a">调试</a>
<ul>
<li><a href="#org4ba4d25">方法 1：VSCode 和 VS 工程中操作</a></li>
<li><a href="#org14ba35f">方法 2：命令行中操作</a></li>
</ul>
</li>
<li><a href="#orgfccdadd">Vulkan Tutorial 配置</a></li>
</ul>
</li>
<li><a href="#org204a6b4">Q&amp;A</a>
<ul>
<li><a href="#orgb7cdcdd">how can i get target name in add_files</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org67ff11a">参考资料</a></li>
</ul>
</div>
</div>
<p>
xmake note.<br />
</p>
<div class="HTML" id="org7c4759f">
<p>
&lt;!&#x2013; more &#x2013;&gt;<br />
</p>

</div>

<div id="outline-container-org91058e8" class="outline-2">
<h2 id="org91058e8">xmake</h2>
<div class="outline-text-2" id="text-org91058e8">
</div>
<div id="outline-container-org98bae15" class="outline-3">
<h3 id="org98bae15">Install</h3>
<div class="outline-text-3" id="text-org98bae15">
</div>
<div id="outline-container-org280190d" class="outline-4">
<h4 id="org280190d">安装 Windows 版本</h4>
<div class="outline-text-4" id="text-org280190d">
<p>
使用安装包<br />
windows 下提供了预制的 nsis 安装包，我们可直接从 github 的 Releases 下载页面下载后，运行安装包即可。<br />
</p>

<p>
从 Releases 上下载 windows 安装包 <a href="https://github.com/xmake-io/xmake/releases">https://github.com/xmake-io/xmake/releases</a><br />
运行安装程序 xmake-[version].exe, 如 xmake-master.win64.exe<br />
</p>
</div>
</div>
<div id="outline-container-orgb7942ae" class="outline-4">
<h4 id="orgb7942ae">vscode c/c++ 开发环境搭建</h4>
<div class="outline-text-4" id="text-orgb7942ae">
<p>
安装如下 vscode 插件：<br />
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">XMake</td>
<td class="org-left">tboox</td>
<td class="org-left">Extended XMake support in Visual Studio Code</td>
</tr>

<tr>
<td class="org-left">C/C++</td>
<td class="org-left">Microsoft</td>
<td class="org-left">C/C++ IntelliSense, debugging, and code browsing.</td>
</tr>

<tr>
<td class="org-left">clangd</td>
<td class="org-left">LLVM</td>
<td class="org-left">C/C++ completion, navigation, and insights</td>
</tr>
</tbody>
</table>

<p>
clangd 的代码补全基于一个叫做 compile_commands.json 的文件，我们首先告诉 clangd 去 build 目录下找。打开 clangd 设置，添加以下命令：<br />
&#x2013;compile-commands-dir=${workspaceFolder}/build<br />
<img src="./xmake/clangd-config.jpg" alt="clangd-config.jpg" /><br />
xmake 可以生成 compile_commands.json，但是其默认是将这个文件生成在.vscode 文件夹下，因此需要改一下 xmake 的设置，让它生成到 build 目录下:<br />
<img src="./xmake/xmake-config01.jpg" alt="xmake-config01.jpg" /><br />
</p>

<p>
xmake 中 run 默认不会执行编译，进行如下配置，可使 run 时执行 build：<br />
<img src="./xmake/xmake-config02.jpg" alt="xmake-config02.jpg" /><br />
</p>

<p>
当 xmake.lua 文件发生修改时，就会自动在 build 目录下生成 compile_commands.json，到此所有的配置就完成了。<br />
如果没有自动生成 compile_commands.json，我们可以在 vscode 中使用 &gt;XMake: UpdateIntellisense 命令手动触发生成，或者在命令行中输入以下命令来生成。<br />
xmake project -k compile_commands build<br />
</p>
</div>
</div>
</div>
<div id="outline-container-orgb57851e" class="outline-3">
<h3 id="orgb57851e">Base Usage</h3>
<div class="outline-text-3" id="text-orgb57851e">
</div>
<div id="outline-container-org31c3a3a" class="outline-4">
<h4 id="org31c3a3a">创建工程</h4>
<div class="outline-text-4" id="text-org31c3a3a">
</div>
<div id="outline-container-org778e958" class="outline-5">
<h5 id="org778e958">方法 1：手动创建</h5>
<div class="outline-text-5" id="text-org778e958">
<ol class="org-ol">
<li>创建工程目录<br /></li>
</ol>
<div class="org-src-container">
<pre class="src src-shell"><span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#21019;&#24314;&#30446;&#24405;</span>
mkdir hello_world
<span style="color: #4f97d7;">cd</span> hello_world
</pre>
</div>

<ol class="org-ol">
<li>创建 xmake.lua 文件<br /></li>
</ol>
<div class="org-src-container">
<pre class="src src-lua">-- 创建 xmake.lua 文件, 使用下面内容填充
add_rules("mode.debug", "mode.release")
target("hello_world")
  set_kind("binary")
  add_files("src/*.cpp")
</pre>
</div>

<ol class="org-ol">
<li>自动配置工程<br /></li>
</ol>
<div class="org-src-container">
<pre class="src src-shell"><span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#33258;&#21160;&#37197;&#32622;&#24037;&#31243;</span>
xmake f    <span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#25110;&#32773; xmake config</span>

<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#26597;&#30475;&#24037;&#31243;&#37197;&#32622;, &#22914;&#26524;&#27809;&#26377;&#37197;&#32622;&#24037;&#31243;&#65292;&#21017;&#33258;&#21160;&#37197;&#32622;&#24037;&#31243;</span>
xmake f -v <span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#25110;&#32773;xmake config -v</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org3e2b6c3" class="outline-5">
<h5 id="org3e2b6c3">方法 2：命令行</h5>
<div class="outline-text-5" id="text-org3e2b6c3">
<div class="org-src-container">
<pre class="src src-shell">xmake create hello_world
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#19978;&#38754;&#21629;&#20196;&#29983;&#25104;&#22914;&#19979;&#30446;&#24405;&#32467;&#26500;&#21644;&#25991;&#20214;&#65306;</span>
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">hello_world</span>
<span style="color: #2aa1ae; background-color: #292e34;">#   </span><span style="color: #2aa1ae; background-color: #292e34;">src/</span>
<span style="color: #2aa1ae; background-color: #292e34;">#       </span><span style="color: #2aa1ae; background-color: #292e34;">main.cpp</span>
<span style="color: #2aa1ae; background-color: #292e34;">#   </span><span style="color: #2aa1ae; background-color: #292e34;">.gitignore</span>
<span style="color: #2aa1ae; background-color: #292e34;">#   </span><span style="color: #2aa1ae; background-color: #292e34;">xmake.lua</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgfcaf008" class="outline-4">
<h4 id="orgfcaf008">工程配置</h4>
<div class="outline-text-4" id="text-orgfcaf008">
<div class="org-src-container">
<pre class="src src-shell"><span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#33258;&#21160;&#37197;&#32622;&#24037;&#31243;</span>
xmake f    <span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#25110;&#32773; xmake config</span>

<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#26597;&#30475;&#24037;&#31243;&#37197;&#32622;, &#22914;&#26524;&#27809;&#26377;&#37197;&#32622;&#24037;&#31243;&#65292;&#21017;&#33258;&#21160;&#37197;&#32622;&#24037;&#31243;</span>
xmake f -v

<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#37197;&#32622;platform architecture mode</span>
xmake f -p [windows|linux|macosx|android|iphoneos ..] -a [x86|arm64 ..] -m [debug|release]

<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#37197;&#32622; vs&#29256;&#26412;</span>
xmake f --vs=2022
</pre>
</div>
</div>
</div>
<div id="outline-container-orgc7fda40" class="outline-4">
<h4 id="orgc7fda40">C++包管理</h4>
<div class="outline-text-4" id="text-orgc7fda40">
</div>
<div id="outline-container-org2077c1c" class="outline-5">
<h5 id="org2077c1c">查找 package</h5>
<div class="outline-text-5" id="text-org2077c1c">
<div class="org-src-container">
<pre class="src src-shell"><span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#26597;&#25214; vulkan package</span>
<span style="color: #2aa1ae; background-color: #292e34;">## </span><span style="color: #2aa1ae; background-color: #292e34;">&#21487;&#20197;&#30475;&#21040; vulkansdk &#26159;&#25105;&#20204;&#38656;&#35201;&#30340;package</span>
xrepo search vulkan

<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">The package names:</span>
<span style="color: #2aa1ae; background-color: #292e34;">#     </span><span style="color: #2aa1ae; background-color: #292e34;">vulkan:</span>
<span style="color: #2aa1ae; background-color: #292e34;">#       </span><span style="color: #2aa1ae; background-color: #292e34;">-&gt; vulkansdk: LunarG Vulkan&#174; SDK (in xmake-repo)</span>
<span style="color: #2aa1ae; background-color: #292e34;">#       </span><span style="color: #2aa1ae; background-color: #292e34;">-&gt; volk-1.3.275+0: volk is a meta-loader for Vulkan (in xmake-repo)</span>
<span style="color: #2aa1ae; background-color: #292e34;">#       </span><span style="color: #2aa1ae; background-color: #292e34;">-&gt; glfw-3.4: GLFW is an Open Source, multi-platform library for OpenGL, OpenGL ES and Vulkan application development. (in xmake-repo)</span>
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">.......</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org98e3526" class="outline-5">
<h5 id="org98e3526">查询 package 信息</h5>
<div class="outline-text-5" id="text-org98e3526">
<div class="org-src-container">
<pre class="src src-shell"><span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#26597;&#35810; vulkansdk package &#20449;&#24687;</span>
xrepo info vulkansdk
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#19979;&#38754;&#30340; configs &#23383;&#27573;&#34920;&#31034;&#21487;&#20197;&#37197;&#32622;&#30340;&#20449;&#24687;</span>
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">The package info of project:</span>
<span style="color: #2aa1ae; background-color: #292e34;">#     </span><span style="color: #2aa1ae; background-color: #292e34;">require(vulkansdk):</span>
<span style="color: #2aa1ae; background-color: #292e34;">#       </span><span style="color: #2aa1ae; background-color: #292e34;">-&gt; description: LunarG Vulkan&#174; SDK</span>
<span style="color: #2aa1ae; background-color: #292e34;">#       </span><span style="color: #2aa1ae; background-color: #292e34;">-&gt; version: latest</span>
<span style="color: #2aa1ae; background-color: #292e34;">#       </span><span style="color: #2aa1ae; background-color: #292e34;">-&gt; repo: xmake-repo https://gitee.com/tboox/xmake-repo.git master</span>
<span style="color: #2aa1ae; background-color: #292e34;">#       </span><span style="color: #2aa1ae; background-color: #292e34;">-&gt; cachedir: C:\Users\wolfand11\AppData\Local\.xmake\cache\packages\2404\v\vulkansdk\latest</span>
<span style="color: #2aa1ae; background-color: #292e34;">#       </span><span style="color: #2aa1ae; background-color: #292e34;">-&gt; installdir: C:\Users\wolfand11\AppData\Local\.xmake\packages\v\vulkansdk\latest\46c06c99027e4154b6f020db58363b1d</span>
<span style="color: #2aa1ae; background-color: #292e34;">#       </span><span style="color: #2aa1ae; background-color: #292e34;">-&gt; searchdirs:</span>
<span style="color: #2aa1ae; background-color: #292e34;">#       </span><span style="color: #2aa1ae; background-color: #292e34;">-&gt; searchnames:</span>
<span style="color: #2aa1ae; background-color: #292e34;">#       </span><span style="color: #2aa1ae; background-color: #292e34;">-&gt; fetchinfo: latest</span>
<span style="color: #2aa1ae; background-color: #292e34;">#       </span><span style="color: #2aa1ae; background-color: #292e34;">-&gt; platforms: all</span>
<span style="color: #2aa1ae; background-color: #292e34;">#       </span><span style="color: #2aa1ae; background-color: #292e34;">-&gt; requires:</span>
<span style="color: #2aa1ae; background-color: #292e34;">#          </span><span style="color: #2aa1ae; background-color: #292e34;">-&gt; plat: windows</span>
<span style="color: #2aa1ae; background-color: #292e34;">#          </span><span style="color: #2aa1ae; background-color: #292e34;">-&gt; arch: x64</span>
<span style="color: #2aa1ae; background-color: #292e34;">#          </span><span style="color: #2aa1ae; background-color: #292e34;">-&gt; configs: #&#21487;&#20197;&#37197;&#32622;&#30340;&#20449;&#24687;</span>
<span style="color: #2aa1ae; background-color: #292e34;">#             </span><span style="color: #2aa1ae; background-color: #292e34;">-&gt; utils: table: 0000017A6478ECB0</span>
<span style="color: #2aa1ae; background-color: #292e34;">#             </span><span style="color: #2aa1ae; background-color: #292e34;">-&gt; runtimes: MT</span>
<span style="color: #2aa1ae; background-color: #292e34;">#             </span><span style="color: #2aa1ae; background-color: #292e34;">-&gt; shared: true</span>
<span style="color: #2aa1ae; background-color: #292e34;">#             </span><span style="color: #2aa1ae; background-color: #292e34;">-&gt; pic: true</span>
<span style="color: #2aa1ae; background-color: #292e34;">#             </span><span style="color: #2aa1ae; background-color: #292e34;">-&gt; debug: false</span>
<span style="color: #2aa1ae; background-color: #292e34;">#       </span><span style="color: #2aa1ae; background-color: #292e34;">-&gt; configs: #&#21487;&#20197;&#37197;&#32622;&#30340;&#20449;&#24687;</span>
<span style="color: #2aa1ae; background-color: #292e34;">#          </span><span style="color: #2aa1ae; background-color: #292e34;">-&gt; shared: Build shared library. (default: true) (readonly)</span>
<span style="color: #2aa1ae; background-color: #292e34;">#          </span><span style="color: #2aa1ae; background-color: #292e34;">-&gt; utils: Enabled vulkan utilities. (default: table: 0000017A6478ECB0)</span>
<span style="color: #2aa1ae; background-color: #292e34;">#       </span><span style="color: #2aa1ae; background-color: #292e34;">-&gt; configs (builtin): #&#21487;&#20197;&#37197;&#32622;&#30340;&#20449;&#24687;</span>
<span style="color: #2aa1ae; background-color: #292e34;">#          </span><span style="color: #2aa1ae; background-color: #292e34;">-&gt; debug: Enable debug symbols. (default: false)</span>
<span style="color: #2aa1ae; background-color: #292e34;">#          </span><span style="color: #2aa1ae; background-color: #292e34;">-&gt; pic: Enable the position independent code. (default: true)</span>
<span style="color: #2aa1ae; background-color: #292e34;">#          </span><span style="color: #2aa1ae; background-color: #292e34;">-&gt; lto: Enable the link-time build optimization. (type: boolean)</span>
<span style="color: #2aa1ae; background-color: #292e34;">#          </span><span style="color: #2aa1ae; background-color: #292e34;">-&gt; asan: Enable the address sanitizer. (type: boolean)</span>
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">......</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgee8735c" class="outline-5">
<h5 id="orgee8735c">版本设置</h5>
<div class="outline-text-5" id="text-orgee8735c">
<div class="org-src-container">
<pre class="src src-lua">add_requires("tbox 1.6.*", "pcre 1.3.x", "libpng ^1.18")
add_requires("libpng ~1.16", "zlib 1.1.2 || &gt;=1.2.11 &lt;1.3.0")
</pre>
</div>

<p>
在 Vulkan Tutorial 中添加如下设置，会报错。目前版本设置还没摸清楚。<br />
</p>
<div class="org-src-container">
<pre class="src src-lua">add_requires("glfw &gt; 3.27.0")
</pre>
</div>
</div>
</div>
<div id="outline-container-org1329030" class="outline-5">
<h5 id="org1329030">删除包</h5>
<div class="outline-text-5" id="text-org1329030">
<p>
使用 xrepo remove vulkansdk<br />
</p>
</div>
</div>
</div>
<div id="outline-container-orgae5bd3d" class="outline-4">
<h4 id="orgae5bd3d">编译运行</h4>
<div class="outline-text-4" id="text-orgae5bd3d">
</div>
<div id="outline-container-org13d4825" class="outline-5">
<h5 id="org13d4825">方法 1：VSCode 中直接操作</h5>
<div class="outline-text-5" id="text-org13d4825">
<p>
VSCode 中直接操作<br />
</p>
</div>
</div>
<div id="outline-container-orga337b8d" class="outline-5">
<h5 id="orga337b8d">方法 2：生成 VS 工程来操作</h5>
<div class="outline-text-5" id="text-orga337b8d">
<div class="org-src-container">
<pre class="src src-shell"><span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#37197;&#32622; vs&#29256;&#26412;</span>
xmake f --vs=2022

<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#21442;&#25968;-a x64&#23601;&#26159;&#29983;&#25104;pc 64&#20301;&#26550;&#26500;vs&#39033;&#30446;&#65292;&#22914;&#26524;&#36755;&#20837;-a x86&#21017;&#29983;&#25104;x86&#26550;&#26500;vs&#39033;&#30446;</span>
xmake project -k vsxmake -a x64
</pre>
</div>
<ul class="org-ul">
<li>Window11 下使用 Xmake 构建 VS2022 sln 项目工程，并进行调试 <a href="https://zhuanlan.zhihu.com/p/576298652">https://zhuanlan.zhihu.com/p/576298652</a><br /></li>
</ul>
</div>
</div>
<div id="outline-container-orgce81552" class="outline-5">
<h5 id="orgce81552">方法 3：命令行中操作</h5>
<div class="outline-text-5" id="text-orgce81552">
<div class="org-src-container">
<pre class="src src-shell"><span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#32534;&#35793;</span>
xmake build 09Multisampling
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#36816;&#34892;</span>
xmake run 09Multisampling
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgc3d994a" class="outline-4">
<h4 id="orgc3d994a">调试</h4>
<div class="outline-text-4" id="text-orgc3d994a">
</div>
<div id="outline-container-org4ba4d25" class="outline-5">
<h5 id="org4ba4d25">方法 1：VSCode 和 VS 工程中操作</h5>
</div>
<div id="outline-container-org14ba35f" class="outline-5">
<h5 id="org14ba35f">方法 2：命令行中操作</h5>
<div class="outline-text-5" id="text-org14ba35f">
<div class="org-src-container">
<pre class="src src-shell"><span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#20999;&#25442;&#21040;debug&#27169;&#24335;</span>
xmake config -m debug
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#37325;&#26032;&#32534;&#35793;</span>
xmake build 09Multisampling
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#36816;&#34892;</span>
xmake run 09Multisampling
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgfccdadd" class="outline-4">
<h4 id="orgfccdadd">Vulkan Tutorial 配置</h4>
<div class="outline-text-4" id="text-orgfccdadd">
<p>
以 Vulkan Tutorial - Development environment 为例进行说明，<a href="../graphics/Vulkan.html#orgccf67b6">Vulkan Tutorial - Development environment</a><br />
</p>
<div class="org-src-container">
<pre class="src src-lua">add_rules("mode.debug", "mode.release")

rule("vulkan_tutorial")
    print(os.projectdir())
    if is_plat("windows") then
        --add_defines("ENGINE_ROOT_DIR=\"" .. (os.projectdir():gsub("\\", "\\\\")) .. "\\\\engine\"")
        print("platform is windows")
    else
        print("platform is others")
        --add_defines("ENGINE_ROOT_DIR=\"" .. (os.projectdir():gsub("\\", "/")) .. "/engine\"")
    end

    before_run(function (target)
        print("[shader] glsl to spirv..")
        import("utils")
        local vulkan_sdk = find_package("vulkansdk") --定位到vulkansdk的路径
        local glslang_validator_dir = vulkan_sdk["bindir"].."\\glslangValidator.exe" --获取到glslangValidator.exe的路径
        -- 遍历 shader 文件
        local targetName = target:name()
        for _, shader_path in ipairs(os.files("$(projectdir)/"..targetName.."/**")) do
            if utils.StrEndWith(shader_path, ".vert") or utils.StrEndWith(shader_path, ".frag") then
                local new_shader_path = string.gsub(shader_path, ".vert", ".spv")
                new_shader_path = string.gsub(new_shader_path, ".frag", ".spv")
                os.runv(glslang_validator_dir,{"-V", shader_path,"-o", new_shader_path}) --执行系统命令
                print("[shader] done: "..shader_path)
            end
        end
    end)
rule_end()

-- add_requires("vulkansdk", {debug=true})
-- add_requires("vulkansdk &gt; 1.3.0", {debug=true})
set_languages("c++20")
add_requires("vulkansdk")
add_requires("glm")
add_requires("glfw")
add_requires("stb")
add_requires("tinyobjloader")

local targetName = "01DevelopmentEnvironment"
target(targetName)
    set_kind("binary")
    add_files(targetName .. "/*.cpp")
    add_packages("vulkansdk", "glm", "glfw")

targetName = "02DrawATriangle"
target(targetName)
    set_kind("binary")
    add_files(targetName .. "/*.cpp")
    -- 设置 build output directory
    --set_targetdir("../build/"..targetName)
    -- 设置 run directory (也就是工作目录)
    set_rundir("$(projectdir)/"..targetName)
    add_packages("vulkansdk", "glm", "glfw")
    add_rules("vulkan_tutorial")
    set_default(true)

targetName = "09Multisampling"
target(targetName)
    set_kind("binary")
    add_files(targetName .. "/*.cpp")
    -- 设置 build output directory
    --set_targetdir("../build/"..targetName)
    -- 设置 run directory (也就是工作目录)
    set_rundir("$(projectdir)/"..targetName)
    add_packages("vulkansdk", "glm", "glfw", "stb", "tinyobjloader")
    add_rules("vulkan_tutorial")
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org204a6b4" class="outline-3">
<h3 id="org204a6b4">Q&amp;A</h3>
<div class="outline-text-3" id="text-org204a6b4">
</div>
<div id="outline-container-orgb7cdcdd" class="outline-4">
<h4 id="orgb7cdcdd">how can i get target name in add_files</h4>
<div class="outline-text-4" id="text-orgb7cdcdd">
<div class="org-src-container">
<pre class="src src-lua">target("kth-largest-element-in-an-array")
    set_kind("binary")
    add_files("kth-largest-element-in-an-array.cpp")

-- 下面配置和上面配置等价
local name = "kth-largest-element-in-an-array"
target(name)
    set_kind("binary")
    add_files(name .. ".cpp")
</pre>
</div>
<ul class="org-ul">
<li><a href="https://github.com/xmake-io/xmake/discussions/2355">https://github.com/xmake-io/xmake/discussions/2355</a><br /></li>
</ul>
</div>
</div>
</div>
</div>
<div id="outline-container-org67ff11a" class="outline-2">
<h2 id="org67ff11a">参考资料</h2>
<div class="outline-text-2" id="text-org67ff11a">
<ul class="org-ul">
<li>官网 <a href="https://xmake.io/#/zh-cn/guide/installation">https://xmake.io/#/zh-cn/guide/installation</a><br /></li>
<li>xmake github <a href="https://github.com/xmake-io/">https://github.com/xmake-io/</a><br /></li>
<li>xmake-vscode github <a href="https://github.com/xmake-io/xmake-vscode">https://github.com/xmake-io/xmake-vscode</a><br /></li>
<li>xmake 教程 <a href="https://www.zhihu.com/column/c_1684334361686712320">https://www.zhihu.com/column/c_1684334361686712320</a><br /></li>
</ul>
</div>
</div>
</div>
<div id="postamble" class="status">
<div id="vssue"></div>
        <link rel="stylesheet" href="https://unpkg.com/vssue/dist/vssue.min.css">
        <script src="https://unpkg.com/vue@2.7.10/dist/vue.runtime.min.js"></script>
        <script src="https://unpkg.com/vssue/dist/vssue.github.min.js"></script>
        <script>
          new Vue({
            el: '#vssue',
            render: h => h('Vssue', {
              props: {
                // 在这里设置当前页面对应的 Issue 标题
                title: 'xmake',

                // 在这里设置你使用的平台的 OAuth App 配置
                options: {
                    owner: 'wolfand11',
                    repo: 'blog_comments',
                    clientId: 'a02b49185d85859cb92c',
                    clientSecret: '6f123085c6f1ce339e2517d24e5b099fa1dc9c85', // 只有在使用某些平台时需要
                },
              }
            })
          })
        </script>
</div>
</body>
</html>
