<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2019-08-16 周五 19:40 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="viewport" content="width=device-width, initial-scale=1" />
<title>Git Github</title>
<meta  name="generator" content="Org-mode" />
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
           <meta name="viewport" content="width=device-width, initial-scale=1" />
           <link rel="stylesheet" title="Standard" href="https://wolfand11.coding.me/res/css/worg.css" type="text/css" />
           <link rel="alternate stylesheet" title="Zenburn" href="https://wolfand11.coding.me/res/css/worg-zenburn.css" type="text/css" />
           <link rel="alternate stylesheet" title="Classic" href="https://wolfand11.coding.me/res/css/worg-classic.css" type="text/css" />
           <link rel="icon" href="http://wolfand11.coding.me/res/favicon.ico" type="image/ico" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href=""> UP </a>
 |
 <a accesskey="H" href="https://wolfand11.coding.me"> HOME </a>
</div><div id="content">
<h1 class="title">Git Github</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgheadline16">Git Github SourceTree</a>
<ul>
<li><a href="#orgheadline6">常用命令</a>
<ul>
<li><a href="#orgheadline3">git</a>
<ul>
<li><a href="#orgheadline1">project manager</a></li>
<li><a href="#orgheadline2">content manager</a></li>
</ul>
</li>
<li><a href="#orgheadline4">git svn</a></li>
<li><a href="#orgheadline5">参考资料</a></li>
</ul>
</li>
<li><a href="#orgheadline7">更新自己 fork 出来的源代码</a></li>
<li><a href="#orgheadline8">在自己 fork 出来的源代码中，以最新源码为基础创建新分支</a></li>
<li><a href="#orgheadline11">库管理方案</a>
<ul>
<li><a href="#orgheadline9">库管理流程</a></li>
<li><a href="#orgheadline10">项目命名 分支命名规则 CommitLog 规则</a></li>
</ul>
</li>
<li><a href="#orgheadline15">LFS</a>
<ul>
<li><a href="#orgheadline12">lfs 使用</a></li>
<li><a href="#orgheadline13">github LFS</a></li>
<li><a href="#orgheadline14">gitlab LFS</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgheadline19">Error Solution</a>
<ul>
<li><a href="#orgheadline17">git -c diff.mnemonicprefix=false -c core.quotepath=false fetch master error: RPC failed; result=18, HTTP code = 200 fatal: The remote end hung up unexpectedly</a></li>
<li><a href="#orgheadline18">error cannot fork to run external filter git-lfs clean &#x2013;%f</a></li>
</ul>
</li>
</ul>
</div>
</div>
<p>
该文档主要纪录 Git Github SourceTree 相关工具的使用。<br  />
</p>
<!-- more -->
<div id="outline-container-orgheadline16" class="outline-2">
<h2 id="orgheadline16">Git Github SourceTree</h2>
<div class="outline-text-2" id="text-orgheadline16">
</div><div id="outline-container-orgheadline6" class="outline-3">
<h3 id="orgheadline6">常用命令</h3>
<div class="outline-text-3" id="text-orgheadline6">
</div><div id="outline-container-orgheadline3" class="outline-4">
<h4 id="orgheadline3">git</h4>
<div class="outline-text-4" id="text-orgheadline3">
</div><div id="outline-container-orgheadline1" class="outline-5">
<h5 id="orgheadline1">project manager</h5>
<div class="outline-text-5" id="text-orgheadline1">
<pre class="example">
克隆默认分支的代码 git clone git://github.com/cocos2d/CocosBuilder.git ./CocosBuilder_origin_default
克隆指定分支的代码 git clone -b develop git://github.com/cocos2d/CocosBuilder.git ./CocosBuilder_origin_develop
在本地初始化一个空仓库			git init
获得本地分支信息                   	git branch
创建新的本地分支                           git branch new_branch_name
切换分支                                	git checkout des_branch_name
创建并切换分支                           	git checkout -b new_branch_name
重命名分支				git branch -m|-M old_name new_name
删除分支					git branch -d|-D branch_name
查看 git branch 帮助                      	git help branch
获得 romote 信息                     	git remote (git remote -v)
添加新的 remote                     	git remote add &lt;remote_name&gt; &lt;remote_url&gt;
删除一个 remote                     	git remote rm &lt;remote_name&gt;
重命名一个 remote                   	git remote rename &lt;remote_old_name&gt; &lt;remote_new_name&gt;
修改 remote 链接地址 					git remote set-url origin git@github.com:USERNAME/REPOSITORY.git
将本地代码 push 到远程分支（远程分支不存在则创建）	git push &lt;remote_name&gt; &lt;local_branch&gt;:&lt;remote_branch&gt;
删除 remote 的一个分支                   	git push &lt;remote_name&gt; :&lt;remote_branch&gt;
添加子工程                             	git submodule add 仓库地址 路径
删除子工程
</pre>
</div>
</div>
<div id="outline-container-orgheadline2" class="outline-5">
<h5 id="orgheadline2">content manager</h5>
<div class="outline-text-5" id="text-orgheadline2">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">功能</th>
<th scope="col" class="org-left">命令</th>
<th scope="col" class="org-left">示例</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">更新代码并自动合并</td>
<td class="org-left">git pull</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">更新代码不自动合并</td>
<td class="org-left">git fetch</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">将本地修改加入 commit 列表</td>
<td class="org-left">git add</td>
<td class="org-left">git add \*.org 将所有 .org 文件的修改加入到 commit 列表</td>
</tr>

<tr>
<td class="org-left">取消本地内容修改</td>
<td class="org-left">git reset</td>
<td class="org-left">git reset &#x2013;hard HEAD</td>
</tr>

<tr>
<td class="org-left">回退到某个版本</td>
<td class="org-left">git reset &#x2013;hard &lt;commit id&gt;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">提交本地修改到分支</td>
<td class="org-left">git commit -m "commit msg"</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">取消前一次版本的修改内容</td>
<td class="org-left">git revert HEAD</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">取消某个版本的修改内容</td>
<td class="org-left">git revert &lt;commit id&gt;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="outline-container-orgheadline4" class="outline-4">
<h4 id="orgheadline4">git svn</h4>
<div class="outline-text-4" id="text-orgheadline4">
<pre class="example">
克隆 svn 仓库到本地仓库   git svn clone http://your.svn.url/svn/Demo
同步 svn 仓库到本地仓库   git svn rebase
将修改添加到本地仓库    git add/commit
将本地仓库同步到 svn 仓库 git svn dcommit (git svn dcommit 不会将本地的多个版本按时间顺序提交给 svn 服务器，而是将这些合为一个进行提交)
处理代码冲突的步骤：
（1）git svn dcommit 时提示需要更新,执行 git svn rebase
（2）解决冲突，执行 git add confilict.files 告知 git 已经解决冲突
（3）执行 git rebase --continue 自己对 confilict.files 的修改进入到本地仓库
（4）执行 git svn dcommit 将改动同步到 svn 仓库

为本地代码添加 git 仓库
git remote add my_origin https://github.com/wolfand11/XXX_SVN
将本地代码同步到 git 仓库
git push my_origin master:master
</pre>
</div>
</div>
<div id="outline-container-orgheadline5" class="outline-4">
<h4 id="orgheadline5">参考资料</h4>
<div class="outline-text-4" id="text-orgheadline5">
<p>
<a href="https://git-scm.com/">https://git-scm.com/</a><br  />
<a href="https://git-scm.com/book/en/v2">https://git-scm.com/book/en/v2</a><br  />
</p>
</div>
</div>
</div>
<div id="outline-container-orgheadline7" class="outline-3">
<h3 id="orgheadline7">更新自己 fork 出来的源代码</h3>
<div class="outline-text-3" id="text-orgheadline7">
<pre class="example">
问题说明：
从 https://github.com/cocos2d/CocosBuilder fork 出来一份 CocosBuilder 的源代码 MyCocosBuilder，
过一段时间以后，原来的 CocosBuilder 的 develop 分支有更新，需要将 CocosBuilder/develop 的更新添加到 MyCocosBuilder/develop 中。
操作方法：
(1)获得最新 MyCocosBuilder/develop 源代码
git clone -b develop https://github.com/wolfand11/CocosBuilder_v2_1.git ./MyCocosBuilder
cd MyCocosBuilder
git submodule update --init --recursive
(2)添加新的远程库
执行命令 git remote add real_origin https://github.com/cocos2d/CocosBuilder
(3)获得 real_origin/develop
git fetch real_origin develop
(4)Merge 修改到本地代码
git merge real_origin/develop
(5)更新 origin/develop 分支
push 本地的 develop 分支到 origin/develop 分支。即 https://github.com/wolfand11/CocosBuilder_v2_1.git 的 develop 分支
</pre>
</div>
</div>

<div id="outline-container-orgheadline8" class="outline-3">
<h3 id="orgheadline8">在自己 fork 出来的源代码中，以最新源码为基础创建新分支</h3>
<div class="outline-text-3" id="text-orgheadline8">
<pre class="example">
问题说明：
从 https://github.com/cocos2d/CocosBuilder fork 出来一份 CocosBuilder 的源代码 MyCocosBuilder，
并且在 MyCocosBuilder/develop 分支的基础上添加自己的分支 v2_0，.过一段时间以后，需要添加分支 MyCocosBuilder/v3_0，
并且要求 My_v3_0 以最新的 CocosBuilder/develop(或者 CocosBuilder/master)为基础。
操作方法：
(1)获得最新 CocosBuilder/develop 源代码
git clone -b develop git://github.com/cocos2d/CocosBuilder.git ./MyCocosBuilder/CocosBuilder_v3_0
cd MyCocosBuilder/CocosBuilder_v3_0
git submodule update --init --recursive
(2)添加新的远程库
执行命令 git remote add my_resource https://github.com/wolfand11/CocosBuilder_v2_1
(3)将本地 develop 分支 push 到 my_resource
git push my_source develop:v3_1
</pre>
</div>
</div>
<div id="outline-container-orgheadline11" class="outline-3">
<h3 id="orgheadline11">库管理方案</h3>
<div class="outline-text-3" id="text-orgheadline11">
</div><div id="outline-container-orgheadline9" class="outline-4">
<h4 id="orgheadline9">库管理流程</h4>
<div class="outline-text-4" id="text-orgheadline9">
<pre class="example">
1 初始化
（1）fork lib source
（2）以自己依赖的分支为基础，创建自己的分支
2 维护
方案 1：简单粗暴法
使用最新库源代码，覆盖当前自己的分支，然后 merge 变化
方案 2：
参考上面的文档：更新自己 fork 出来的源代码
</pre>
</div>
</div>
<div id="outline-container-orgheadline10" class="outline-4">
<h4 id="orgheadline10">项目命名 分支命名规则 CommitLog 规则</h4>
<div class="outline-text-4" id="text-orgheadline10">
<pre class="example">
自己的代码
1、项目名称以及分支名称可以参照其他开源项目命名方案。

Fork 出来的代码
1、项目名称前面加 My。例如：MyCocosBuilder Mycocos2d-x
2、加分支时，分支的命名前加 My_。例如：My_v2_1 My_v3_0
3、commit 时，如果修改了原来源代码的，日志前加[ChangeOrigin]
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline15" class="outline-3">
<h3 id="orgheadline15">LFS</h3>
<div class="outline-text-3" id="text-orgheadline15">
</div><div id="outline-container-orgheadline12" class="outline-4">
<h4 id="orgheadline12">lfs 使用</h4>
<div class="outline-text-4" id="text-orgheadline12">
<div class="org-src-container">

<pre class="src src-shell"><span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#21021;&#22987;&#21270;&#65292;&#21152;&#20837; lfs</span>
git lfs install               <span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">initialize the git lfs project</span>
git lfs track <span style="color: #2d9574;">"*.png"</span>         <span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">track png file with lfs</span>
git add .gitattributes        <span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">record lfs track file types</span>

<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#24050;&#26377;&#39033;&#30446;</span>
git lfs fetch origin master
git lfs pull
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline13" class="outline-4">
<h4 id="orgheadline13">github LFS</h4>
<div class="outline-text-4" id="text-orgheadline13">
<p>
目前 Github 大文件空间只有 1G，所以，还是不要使用 LFS。<br  />
</p>

<p>
<a href="https://docs.gitlab.com/ee/workflow/lfs/manage_large_binaries_with_git_lfs.html#git-lfs">https://docs.gitlab.com/ee/workflow/lfs/manage_large_binaries_with_git_lfs.html#git-lfs</a><br  />
</p>
</div>
</div>
<div id="outline-container-orgheadline14" class="outline-4">
<h4 id="orgheadline14">gitlab LFS</h4>
<div class="outline-text-4" id="text-orgheadline14">
<p>
<a href="https://git-lfs.github.com">https://git-lfs.github.com</a><br  />
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline19" class="outline-2">
<h2 id="orgheadline19">Error Solution</h2>
<div class="outline-text-2" id="text-orgheadline19">
</div><div id="outline-container-orgheadline17" class="outline-3">
<h3 id="orgheadline17">git -c diff.mnemonicprefix=false -c core.quotepath=false fetch master error: RPC failed; result=18, HTTP code = 200 fatal: The remote end hung up unexpectedly</h3>
<div class="outline-text-3" id="text-orgheadline17">
<div class="org-src-container">

<pre class="src src-shell"><span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#20808;&#25191;&#34892;&#19979;&#38754;&#21629;&#20196;</span>
git clone --depth <span style="color: #a45bad;">1</span> &lt;url&gt;
<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">&#20877;&#25191;&#34892;&#19979;&#38754;&#21629;&#20196;</span>
git fetch --depth=<span style="color: #a45bad;">1000000</span>
<span style="color: #2aa1ae; background-color: #292e34;">## </span><span style="color: #2aa1ae; background-color: #292e34;">&#23545;&#20110; git version &gt;= 1.8.3 &#30340;&#29992;&#25143;&#65292;&#21487;&#20197;&#20351;&#29992;&#19979;&#38754;&#21629;&#20196;&#20195;&#26367;&#19978;&#19968;&#26465;&#21629;&#20196;</span>
git fetch --unshallow
</pre>
</div>

<ul class="org-ul">
<li>参考资料<br  />
<a href="https://stackoverflow.com/questions/18548637/git-clone-fatal-error-rpc-failed-the-remote-end-hung-up-unexpectedly-early">https://stackoverflow.com/questions/18548637/git-clone-fatal-error-rpc-failed-the-remote-end-hung-up-unexpectedly-early</a><br  /></li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline18" class="outline-3">
<h3 id="orgheadline18">error cannot fork to run external filter git-lfs clean &#x2013;%f</h3>
</div>
</div>
</div>
</body>
</html>
